
<!DOCTYPE html><html><head>
    <title>Calculadora: Ej. final módulo 3</title>
    <meta charset="utf-8">
    <script type="text/javascript">
  
      function vaciar () { 

      
        document.getElementById("pantalla").value = "";
      }
  const rellenar_info=()=>{
    let info = document.getElementById("info"); 
    let res = document.getElementById("pantalla");
 
    if (res.value < 0){ 
        info.innerHTML = "Error! valor menor a 0";
   
   
    } 
    else if (res.value < 100) {
        info.innerHTML = "Info: el resultado es menor que 100";  
    } else if ((res.value >= 100) && (res.value <= 200)) { 
        info.innerHTML = "Info: el resultado está entre 100 y 200";
   
   
    } 
    
    
    
    
    else { 
        info.innerHTML = "Info: el resultado es superior a 200";
    }


  }
      function cuadrado() { 
        let num = document.getElementById("pantalla");
        num.value = num.value * num.value;
        rellenar_info();
        
        
      }

  function mod(){
      let valor=document.getElementById("pantalla");
      
      
      if(valor.value<0){valor.value=valor.value*-1;
        rellenar_info();}

  }

function fact(){
    let result=document.getElementById("pantalla");

    
    for(let i = result.value-1; i>0; i--){
    result.value*= i;
    }
   
    rellenar_info();
    
  }
   let numero, acumula;
   let operacion;
  const inicializar = () => { // inicializa las variables globales
    numero = document.getElementById("pantalla");
    acumula = numero.value;
    operacion="";
   
  }
 

  function mul(){
  //guarda en variables globales lo ingresado previo a borrar:

   inicializar();
   operacion="*";
    
  }

  function suma(){
      inicializar();
      operacion="+"
  }
  function resta(){
      inicializar();
      operacion="-"
  }
  function div(){
      inicializar();
      operacion="/"
  }
  function resto(){
      inicializar();
      operacion="%"
  }
  function pot(){
      inicializar();
      operacion="x_y"
  }

  function sumatoria(){
    let num = document.getElementById("pantalla");
    let lista = num.value.split(","); // convierte el string en array
    let info = document.getElementById("info");
    if (lista.length > 1 && lista !== undefined) { // para verificar que el array tiene más de un elemento
        let i = 0;
        let suma = 0;
        while (i < lista.length) suma += +lista[i++]; // recorre el array y suma cada elemento
        if (isNaN(suma)) { // comprueba si 'suma' no es un número
            num.value = "Error.";
            info.innerHTML = "Uno o más valores no eran cifras.";
        } else {
            num.value = suma;
            rellenar_info();
        }

    } else {
        num.value = "Error.";
        info.innerHTML = "Introduce dos o más cifras, separadas por comas.";
    }
  }

  const ordenar = () => { // función ordenar con un método de ordenación ascendente
    let num = document.getElementById("pantalla");
    let lista = num.value.split(","); // convierte el string en array
    let info = document.getElementById("info");
    if (lista.length > 1 && lista !== undefined) { // para verificar que el array tiene más de un elemento
        for (let i = 0; i < lista.length; i++) { // recorre el array 'lista'
            if (isNaN(lista[i])) { // comprueba si los elementos del array no son números
                num.value = "Error.";
                info.innerHTML = "Uno de los valores no era una cifra";
            } else {
                num.value = lista.sort((a, b) => a - b); // ordena el array, comparando los elementos
            }
        }
    } else {
        num.value = "Error.";
        info.innerHTML = "Introduce dos o más cifras, separadas por comas.";
    }
}
const revertir = () => { // función revertir
    let num = document.getElementById("pantalla");
    let lista = num.value.split(","); // convierte el string en array
    let info = document.getElementById("info");
    if (lista.length > 1 && lista !== undefined) { // para verificar que el array tiene más de un elemento
        for (let i = 0; i < lista.length; i++) { // recorre el array 'lista'
            if (isNaN(lista[i])) { // comprueba si los elementos del array no son números
                num.value = "Error.";
                info.innerHTML = "Uno de los valores no era una cifra";
            } else {
                num.value = lista.reverse();
            }
        }
    } else {
        num.value = "Error.";
        info.innerHTML = "Introduce dos o más cifras, separadas por comas.";
    }
}
const quitar = () => {
    let num = document.getElementById("pantalla");
    let lista = num.value.split(","); // convierte el string en array
    let info = document.getElementById("info");
    if (lista.length > 1 && lista !== undefined) { // para verificar que el array tiene más de un elemento
        let i = 0;
        let suma = 0;
        while (i < lista.length) suma += +lista[i++]; // recorre el array y suma cada elemento
        if (isNaN(suma)) { // comprueba si 'suma' no es un número
            num.value = "Error.";
            info.innerHTML = "Uno o más valores no eran cifras";
        } else {
            num.value = lista.pop(); // elimina el última elemento del array
            num.value = lista; // muestra el array sin el último elemento
        }
    } else {
        num.value = "Error.";
        info.innerHTML = "Introduce dos o más cifras, separadas por comas.";
    }
}

  function eq(){
    
    switch (operacion) {
        case "*":
            numero.value =acumula*numero.value; 
            rellenar_info();
            break;
            case "+":
            numero.value = +acumula + +numero.value;
            rellenar_info();
            break;
        case "-":
            numero.value = acumula - numero.value;
            rellenar_info();
            break;
        case "/":
            numero.value = acumula / numero.value;
            rellenar_info();
            break;
        case "%":
            numero.value = acumula % numero.value;
            rellenar_info();
            break;
        case "x_y":
            numero.value = Math.pow(acumula, numero.value);
            rellenar_info();
            break;
        default:
            document.getElementById("info").innerHTML = "Elige una operación";
    }
   
  }
 
    </script>
  </head>
  <body>
    <div id="caja">
        <h1>Calculadora web</h1>
        <input type="text" id="pantalla" onclick="vaciar()">
        <h2 id="info" class="grande" title="Info sobre el número">Info sobre el número</h2>
        <h3 class="separador">Operaciones unitarias</h3>
        <button id="cuadrado" onclick="cuadrado()">x<sup>2</sup></button>
        <button id="modulo" onclick="mod()">|x|</button>
        <button id="factorial" onclick="fact()">n!</button>
        <h3 class="separador">Operaciones binarias</h3>
        <button id="suma" onclick="suma()">+</button>
        <button id="resta" onclick="resta()">-</button>
        <button id="multiplicacion" onclick="mul()">*</button>
        <button id="division" onclick="div()">/</button>
        <button id="resto" onclick="resto()">%</button>
        <button id="potencia" onclick="pot()">x<sup>y</sup></button>
        <button id="igual" onclick="eq()">=</button>
        <h3 class="separador">Operaciones en formato CSV (pantalla, n2, n3, n4...)</h3>
        <button id="sumatorio" onclick="sumatoria()">Σx</button>
        <button id="ordenar" onclick="ordenar()">Ordenar</button>
        <button id="revertir" onclick="revertir()">Revertir</button>
        <button id="quitar" onclick="quitar()">Quitar</button>
      </div>
   </body>
  </html>
  
  